{% for item in object_list %}

    <div class="row px-3 align-items-center todo-item rounded" {% if forloop.last and page_obj.has_next %}
         hx-get="{% url 'htmx_todo_app_management' %}?page={{ page_obj.next_page_number }}" hx-trigger="revealed"
         hx-swap="afterend"  {% endif %}>
        <div class="col-auto m-1 p-0 d-flex align-items-center">
            <h2 class="m-0 p-0">
                {% if item.status == 'completed' %}

                    <a hx-get="{% url 'htmx_todo_app_update_status' item.id %}" hx-target="#item_list"
                       hx-swap="innerHtml">
                        <i class="fa fa-check-square-o text-primary btn m-0 p-0" data-toggle="tooltip"
                           data-placement="bottom" title="Mark as todo"></i>
                        {% comment %}<i class="fa fa-square-o text-primary btn m-0 p-0" data-toggle="tooltip" data-placement="bottom" title="Mark as complete"></i>
                        <i class="fa fa-check-square-o text-primary btn m-0 p-0 d-none" data-toggle="tooltip" data-placement="bottom" title="Mark as todo"></i>{% endcomment %}
                    </a>
                {% else %}
                    <a hx-get="{% url 'htmx_todo_app_update_status' item.id %}" hx-target="#item_list"
                       hx-swap="innerHtml">
                        <i class="fa fa-square-o text-primary btn m-0 p-0" data-toggle="tooltip" data-placement="bottom"
                           title="Mark as complete"></i>
                        <i class="fa fa-check-square-o text-primary btn m-0 p-0 d-none" data-toggle="tooltip"
                           data-placement="bottom" title="Mark as todo"></i>
                    </a>
                {% endif %}
            </h2>

        </div>
        <div class="col px-1 m-1 d-flex align-items-center">
            <input type="text" class="form-control form-control-lg border-0 edit-todo-input bg-transparent rounded px-3"
                   name="todo_name" hx-get="{% url 'htmx_todo_app_update_new' item.id %}" hx-swap="#item_list"
                   hx-trigger="keyup changed delay:500ms" id="todo_name" value="{{ item.title }}"
                   title="{{ item.title }}"/>

        </div>
        <div class="col-auto m-1 p-0 ">
            <div class="row d-flex align-items-center justify-content-end">

                <a hx-get="{% url 'htmx_todo_app_delete' item.pk %}"
                   hx-confirm="Are you sure you want to delete this {{ item.title }}?"
                   hx-target="#item_list" hx-swap="innerHtml">
                    <h5 class="m-0 p-0 px-2">
                        <i class="fa fa-trash-o text-danger btn m-0 p-0" data-toggle="tooltip"
                           data-placement="bottom" title="Delete todo"

                        ></i>
                    </h5>
                </a>
            </div>
            <div class="row todo-created-info">
                <div class="col-auto d-flex align-items-center pr-2">
                    <i class="fa fa-info-circle my-2 px-2 text-black-50 btn" data-toggle="tooltip"
                       data-placement="bottom" title="" data-original-title="Created date"></i>
                    <label class="date-label my-2 text-black-50">{{ item.created.date }} </label>
                </div>
            </div>
        </div>

    </div>
{% endfor %}


<script>
    document.addEventListener("htmx:afterOnLoad", function(event) {
        console.log("htmx:afterOnLoad", event.detail.elt);
    // Clear the input fields after the form submission
    document.getElementById('title').value = '';
    document.getElementById('due_date').value = '';
});

</script>

